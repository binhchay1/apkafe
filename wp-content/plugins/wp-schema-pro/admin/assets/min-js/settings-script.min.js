!function(n){var e=wp.i18n["__"];const r={person:e("Website Owner Name"),organization:e("Organization Name","wp-schema-pro"),Webshop:e("Webshop Name","wp-schema-pro"),personblog:e("Website Owner Name","wp-schema-pro"),Smallbusiness:e("Blog Website Name","wp-schema-pro"),Otherbusiness:e("Business Name","wp-schema-pro")},t={init(){const s=this;this.customFieldDependecy(),this.customImageSelect(),this.initRepeater(),this.toolTips(),this.regenerateSchema(),n("select.wp-select2").each(function(e,t){s.init_target_rule_select2(t)})},regenerateSchema(){n("#wpsp-regenerate-schema").click(function(){n(this).next("span.spinner").addClass("is-active"),jQuery.ajax({url:ajaxurl,type:"post",dataType:"json",data:{action:"regenerate_schema",nonce:n(this).data("nonce")}}).success(function(){n("#wpsp-regenerate-schema").next("span.spinner").removeClass("is-active"),n("#wpsp-regenerate-notice").show().delay(2e3).fadeOut()})})},toolTips(){n(document).on("click",".wp-schema-pro-tooltip-icon",function(e){e.preventDefault(),n(".wp-schema-pro-tooltip-wrapper").removeClass("activate"),n(this).parent().addClass("activate")}),n(document).on("click",function(e){n(e.target).hasClass("wp-schema-pro-tooltip-description")||n(e.target).hasClass("wp-schema-pro-tooltip-icon")||0!==n(e.target).closest(".wp-schema-pro-tooltip-description").length||n(".wp-schema-pro-tooltip-wrapper").removeClass("activate")})},customImageSelect(){let s;window.inputWrapper="",n(document.body).on("click",".image-field-wrap .aiosrs-image-select",function(e){e.preventDefault(),window.inputWrapper=n(this).closest("td"),(s=wp.media({button:{text:"Select Image",close:!1},states:[new wp.media.controller.Library({title:"Select Custom Image",library:wp.media.query({type:"image"}),multiple:!1})]})).on("select",function(){var e=s.state().get("selection").first().toJSON(),t=window.inputWrapper.find(".image-field-wrap img");0===t.length?window.inputWrapper.find(".image-field-wrap").append('<a href="#" class="aiosrs-image-select img"><img src="'+e.url+'" /></a>'):t.attr("src",e.url),window.inputWrapper.find(".image-field-wrap").addClass("bsf-custom-image-selected"),window.inputWrapper.find(".single-image-field").val(e.id),s.close()}),s.open()}),n(document).on("click",".aiosrs-image-remove",function(e){e.preventDefault();e=n(this).closest("td");e.find(".image-field-wrap").removeClass("bsf-custom-image-selected"),e.find(".single-image-field").val(""),e.find(".image-field-wrap img").removeAttr("src")}),window.inputWrapper=""},customFieldDependecy(){jQuery(document).on("change","#post-body-content .wp-schema-pro-custom-option-select, .aiosrs-pro-setup-wizard-content.general-setting-content-wrap .wp-schema-pro-custom-option-select",function(){var e=jQuery(this).next(".custom-field-wrapper");e.css("display","none"),"custom"===jQuery(this).val()&&e.css("display","")}),jQuery(document).on("change",'select[name="wp-schema-pro-general-settings[site-represent]"]',function(){var e=jQuery(this).closest("table"),t=e.find(".wp-schema-pro-site-logo-wrap"),s=e.find(".wp-schema-pro-site-name-wrap"),e=e.find(".wp-schema-pro-person-name-wrap");s.css("display","none"),e.css("display","none"),""!==jQuery(this).val()&&("organization"===jQuery(this).val()||"Webshop"===jQuery(this).val()||"Smallbusiness"===jQuery(this).val()||"Otherbusiness"===jQuery(this).val()?(t.css("display",""),s):(e.css("display",""),t)).css("display","")}),jQuery(document).on("change",'select[name="wp-schema-pro-general-settings[site-represent]"]',function(){var e=jQuery(this).val();""!==jQuery(this).val()&&e in r&&n(".wpsp-organization-label").text(r[e])}),jQuery(document).on("change",'select[name="wp-schema-pro-corporate-contact[contact-type]"]',function(){var e=jQuery(this).closest("table").find(".wp-schema-pro-other-wrap");e.css("display","none"),""!==jQuery(this).val()&&"other"===jQuery(this).val()&&e.css("display","")}),n("#add-row").on("click",function(){var e=n(".empty-row.screen-reader-text").clone(!0);return e.removeClass("empty-row screen-reader-text"),e.insertBefore("#repeatable-fieldset-one >tr:last"),!1}),n(".remove-row").on("click",function(){return n(this).parents("tr").remove(),!1})},initRepeater(){n(document).on("click",".bsf-repeater-add-new-btn",function(e){e.preventDefault();const t=n(this),s=t.closest(".bsf-aiosrs-schema-type-wrap"),a=s.find(".aiosrs-pro-repeater-table-wrap").length,r=s.find(".aiosrs-pro-repeater-table-wrap").first().clone();r.find("input, textarea, select").each(function(){n(this).val("");var e=void 0!==n(this).attr("name")?n(this).attr("name").replace("[0]","["+a+"]"):"",t=void 0!==n(this).attr("class")?n(this).attr("class").replace("-0-","-"+a+"-"):"",s=void 0!==n(this).attr("id")?n(this).attr("id").replace("-0-","-"+a+"-"):"";n(this).attr("name",e),n(this).attr("class",t),n(this).attr("id",s)}),r.insertBefore(t)}),n(document).on("click",".bsf-repeater-close",function(e){e.preventDefault();e=n(this);1<e.closest(".bsf-aiosrs-schema-type-wrap").find("> .aiosrs-pro-repeater-table-wrap").length&&e.closest(".aiosrs-pro-repeater-table-wrap").remove()})},init_target_rule_select2(e){n(e).select2({placeholder:"Search Fields...",ajax:{url:ajaxurl,dataType:"json",method:"post",delay:250,data(e){return{nonce_ajax:AIOSRS_search.search_field,q:e.term,page:e.page,action:"bsf_get_specific_pages"}},processResults(e){return{results:e}},cache:!0},minimumInputLength:2})}};n(document).ready(function(){var e,t,s,a;n(".wp-select2").select2(),n(".wpsp-setup-configuration-settings").select2(),s=jQuery('select[name="wp-schema-pro-general-settings[site-represent]"]'),e=s.closest("table"),t=e.find(".wp-schema-pro-site-logo-wrap"),a=e.find(".wp-schema-pro-site-name-wrap"),e=e.find(".wp-schema-pro-person-name-wrap"),a.css("display","none"),e.css("display","none"),""!==s.val()&&("organization"===s.val()||"Webshop"===s.val()||"Smallbusiness"===s.val()||"Otherbusiness"===s.val()?(t.css("display",""),a):(e.css("display",""),t)).css("display",""),s=jQuery('select[name="wp-schema-pro-general-settings[site-represent]"]'),a=s.val(),""!==s&&a in r&&n(".wpsp-organization-label").text(r[a]),n("#add-row").on("click",function(){var e=n(".empty-row.screen-reader-text").clone(!0);return e.removeClass("empty-row screen-reader-text"),e.insertBefore("#repeatable-fieldset-one tbody>tr:last"),!1}),n(".remove-row").on("click",function(){return n(this).parents("tr").remove(),!1})}),n(function(){t.init()})}(jQuery);