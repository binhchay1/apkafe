jQuery(document).ready((function(t){jQuery(document).on("ninja_table_loaded",(function(a,e,n){if("wp_woo"==n.provider){var r={},i={},o=window.ninjaTableCartItems||{},d=function(t,a){return Object.keys(t).every((function(e,n,r){return t[e]===a[e]&&a[e].length>0||0===t[e].length&&a[e].length>0}))},c=function(t){return 0===t.length||t.includes("")};e.find(".nt_add_cart_wrapper").each((function(a,e){_(t(e))})),e.on("change",".nt_woo_attribute",(function(a){_(t(this),!0)})),e.on("change",".nt_woo_quantity",(function(a){var n=t(this),r=n.data("product_id");e.find(".nt_add_to_cart_"+r).attr("data-quantity",n.val())})),e.on("click",".single_add_to_cart_button",(function(a){a.preventDefault();var d=t(this),c=d.attr("data-product_id"),_=d.attr("data-product_type");if("variable"===_){var l=i[c],s=l&&l.variation_id;if(!s)return alert("Please select some product options before adding this product to your cart."),!1;if(!u(l,c))return t(".selected_price_"+c).html(""),alert("Sorry, this product is unavailable. Please choose a different combination."),!1;r.variation_id=s,r.attributes=l&&l.attributes}r.product_id=c,r.quantity=d.attr("data-quantity"),r.product_type=_,r.ninja_table=n.table_id,r.action="ninja_table_wp_woo_add_to_cart",d.parent().addClass("nt_added_cart");var p=d.html();d.append('<span class="fooicon fooicon-loader"></span>'),t.post(window.ninja_footables.ajax_url,r).then((function(a){if("variable"===_){var n=a.data;o=n.cart_items,t(document.body).trigger("added_to_cart",[n.fragments.fragments,n.fragments.cart_hash,d])}else t(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,d]);e.find("a.added_to_cart.wc-forward").html("");var r=t("#nt_product_qty_"+c);r.val(1),r.trigger("change")})).fail((function(t){})).always((function(){d.html(p)}))}))}function _(a){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a.children(),r=n.data("product_id"),o=n.data("product_variations"),_=t(".ntb_attribute_select_"+r),l=_.data("attribute_name"),s=_.val(),p=n.data("product_type");if(e&&(r=a.data("product_id"),o=a.parents().children().data("product_variations"),p=a.parents().children().data("product_type"),l=a.data("attribute_name"),s=a.val(),_=t(".ntb_attribute_select_"+r)),"variable"===p){var f={},v={};_.each((function(a,n){var r=t(n),i=r.data("attribute_name"),d=r.data("attribute_label"),_=r.val(),u=r.data("default_options"),p=Object.keys(u),v=p;if(l!==i){for(var b=[],h=0;h<o.length;h++){var y=o[h];y.attributes[l]===s&&b.push(y.attributes[i])}v=c(b)?p:b}else v=p;r.empty(),r.append('<option value="">'+d+"</option>"),v.map((function(t,a){r.append('<option value="'+t+'">'+u[t]+"</option>")}));var m="";e&&!v.includes(_)?(r.val(""),m=""):(m=_,r.val(_)),f[i]=m})),v[r]=f,function(a,e){var n=t(".nt_add_to_cart_"+a),r=t(".selected_price_"+a),o=n.data("product_variations");o.length>0&&o.map((function(t,n){if(d(t.attributes,e[a])){var r=JSON.parse(JSON.stringify(t));r.attributes=e[a],i[a]=r}})),i[a]&&d(i[a].attributes,e[a])?u(i[a],a):(r.html(""),n.css("opacity","0.5"),delete i[a])}(r,v)}}function u(a,e){var n=a.variation_id,r=a.is_in_stock,i=a.backorders_allowed,d=a.max_qty,c=t(".nt_add_to_cart_"+e),_=t(".selected_price_"+e),u=a.price_html,l=a.availability_html;_.html(u+" "+l);var s=function(){return(r||i)&&(""===d||d>(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0))?(c.css("opacity","1"),!0):(c.css("opacity","0.5"),_.html(u+'<p class="stock out-of-stock">Out of stock</p>'),!1)};if(o&&Object.keys(o).length>0){var p=Object.values(o).find((function(t){return t.variation_id===n}));return p?s(p.quantity):s()}return s()}}))}));